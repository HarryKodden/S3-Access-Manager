server:
  host: "0.0.0.0"
  port: 9000
  read_timeout: 30s
  write_timeout: 30s

oidc:
  # Your OIDC provider's issuer URL
  # RECOMMENDED: Set via OIDC_ISSUER environment variable
  issuer: ""

  # Client credentials
  # SECURITY: Set these via environment variables instead:
  #   OIDC_CLIENT_ID
  #   OIDC_CLIENT_SECRET
  client_id: ""
  client_secret: ""

  # OIDC scopes to request
  # Default: "openid profile email eduPersonEntitlement"
  # Set via OIDC_SCOPES environment variable
  scopes: "openid profile email eduPersonEntitlement"

  # The claim in the JWT that contains role names
  groups_claim: "groups"

  # Optional: Additional claims to extract for logging
  user_claim: "sub"
  email_claim: "email"

  # Session cache TTL - how long to cache user info before revalidating with OIDC provider
  # Default: 15m (15 minutes)
  # Set via OIDC_SESSION_CACHE_TTL environment variable (e.g., "10m", "30m", "1h")
  # After this time, the access token is revalidated via the userinfo endpoint
  # If validation succeeds, the session cache is extended by this duration
  session_cache_ttl: 15m

s3:
  # S3 endpoint (use https://s3.amazonaws.com for AWS S3)
  # RECOMMENDED: Set via S3_ENDPOINT environment variable
  endpoint: ""

  # AWS region
  # RECOMMENDED: Set via S3_REGION or AWS_REGION environment variable
  region: ""

  # Backend: Always uses AWS CLI for user/credential management

  # Optional: Custom S3-compatible storage (MinIO, Wasabi, etc.)
  # Set via S3_FORCE_PATH_STYLE environment variable
  force_path_style: false

  # IAM admin credentials for user/policy management on S3 backend
  iam:
    # SECURITY: Set these via environment variables instead:
    #   IAM_ACCESS_KEY
    #   IAM_SECRET_KEY
    access_key: ""
    secret_key: ""

policies:
  # Directory containing policy JSON files (admin-created policies only)
  directory: "./data/policies"

  # Default policy when no roles match
  default_deny: true

  # Cache policies in memory (improves performance)
  cache_enabled: true
  cache_ttl: 300s

# Roles Configuration (backend API uses /settings/roles)
roles:
  # Directory where role files are stored (SCIM Group -> Role -> IAM Group mapping)
  directory: "./data/roles"

# SCIM Configuration
users:
  # Directory for SCIM user data
  directory: "./data/Users"

groups:
  # Directory for SCIM group data (candidate groups for policy assignment)
  directory: "./data/Groups"

# Admin Configuration
admin:
  # Admin user's email/username (user with this identity gets admin privileges)
  # RECOMMENDED: Set via ADMIN environment variable
  # Example: "admin@example.com"
  # Admin users can:
  #   - Create/edit/delete policies
  #   - Create/edit/delete roles
  #   - View and manage all users
  #   - Create credentials for any group
  # Regular users can only:
  #   - Create credentials for groups they belong to
  #   - View their own credentials
  username: ""

logging:
  # Log level: debug, info, warn, error
  level: "info"

  # Log format: json, text
  format: "json"

  # Log file path (empty for stdout only)
  file: ""

  # Enable access logging
  access_log: true

  # Log S3 operations
  audit_log: true

security:
  # Enable request signature validation
  validate_signatures: true

  # Allowed HTTP methods
  allowed_methods:
  - GET
  - PUT
  - POST
  - DELETE
  - HEAD
  # Enable CORS
  cors_enabled: true
  cors_origins:
  - "*"
  # Rate limiting (requests per minute per user)
  rate_limit: 1000

monitoring:
  # Enable Prometheus metrics endpoint
  metrics_enabled: true
  metrics_port: 9090
